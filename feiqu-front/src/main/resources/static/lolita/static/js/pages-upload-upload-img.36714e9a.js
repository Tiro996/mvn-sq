(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-upload-upload-img"],{"0167":function(e,t,n){var o=n("fc1e");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var c=n("4f06").default;c("0bd03745",o,!0,{sourceMap:!1,shadowMode:!1})},"1ec0":function(e,t,n){var o=n("a6d0");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var c=n("4f06").default;c("792bacb5",o,!0,{sourceMap:!1,shadowMode:!1})},3223:function(e,t,n){"use strict";var o=n("1ec0"),c=n.n(o);c.a},"41e1":function(e,t,n){"use strict";n.r(t);var o=n("8499"),c=n("ccf8");for(var a in c)"default"!==a&&function(e){n.d(t,e,function(){return c[e]})}(a);n("3223");var i=n("2877"),f=Object(i["a"])(c["default"],o["a"],o["b"],!1,null,"c39115fe",null);t["default"]=f.exports},4394:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("2f62"),c=a(n("41e1"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){f(e,t,n[t])})}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r={data:function(){return{title:"uploadFile",picUrl:"",remark:"",imageMode:"aspectFit"}},components:{mIcon:c.default},computed:i({},(0,o.mapState)(["token","hasLogin"])),onLoad:function(){},methods:{chooseImage:function(){var e=this,t=this;uni.chooseImage({count:1,sizeType:["compressed"],sourceType:["album"],success:function(n){console.log("chooseImage success, temp path is",n.tempFilePaths[0]);var o=n.tempFilePaths[0];uni.uploadFile({url:e.$serverUrl+"/api/h5Upload",filePath:o,fileType:"image",name:"file",formData:{token:e.token},success:function(e){var n=JSON.parse(e.data);console.log("uploadImage success, data is:",n),n.success?(uni.showToast({title:"上传成功",icon:"success",duration:1e3}),t.picUrl=n.data):uni.showToast({icon:"none",title:n.message,duration:1e3})},fail:function(e){console.log("uploadImage fail",e),uni.showModal({content:e.errMsg,showCancel:!1})}})},fail:function(e){console.log("chooseImage fail",e)}})},bindTextAreaBlur:function(e){},formSubmit:function(e){return e.detail.value.token=this.token,e.detail.value.picUrl=this.picUrl,e.detail.value.remark.length<5?(uni.showToast({icon:"none",title:"图片描述太短了",duration:2e3}),!1):""===this.picUrl?(uni.showToast({icon:"none",title:"请先上传一张照片",duration:2e3}),!1):void uni.request({method:"POST",url:this.$serverUrl+"/fqLolita/save",data:e.detail.value,header:{"custom-header":"hello"},success:function(e){console.log(e.data),e.data.success?(uni.showToast({icon:"success",title:"发表成功",duration:2e3}),uni.reLaunch({url:"../list/list"})):uni.showToast({icon:"none",title:e.data.message,duration:2e3})}})}}};t.default=r},4611:function(e,t,n){"use strict";n.r(t);var o=n("4394"),c=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);t["default"]=c.a},"56f5":function(e,t,n){"use strict";n.r(t);var o=n("673c"),c=n("4611");for(var a in c)"default"!==a&&function(e){n.d(t,e,function(){return c[e]})}(a);n("9e7f");var i=n("2877"),f=Object(i["a"])(c["default"],o["a"],o["b"],!1,null,"1b69aa6e",null);t["default"]=f.exports},"673c":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"content"},[n("v-uni-view",[n("v-uni-form",{on:{submit:function(t){t=e.$handleEvent(t),e.formSubmit(t)},reset:function(t){t=e.$handleEvent(t),e.formReset(t)}}},[n("v-uni-view",{staticClass:"uni-textarea"},[n("v-uni-textarea",{staticStyle:{height:"150px"},attrs:{focus:"",placeholder:"输入图片的描述",name:"remark",maxlength:"100"},on:{blur:function(t){t=e.$handleEvent(t),e.bindTextAreaBlur(t)}}})],1),n("v-uni-view",[n("v-uni-image",{directives:[{name:"show",rawName:"v-show",value:""!=e.picUrl,expression:"picUrl!=''"}],staticClass:"image",attrs:{name:"picUrl",src:e.picUrl,mode:"scaleToFill"}}),n("v-uni-view",{staticClass:"addfile",on:{click:function(t){t=e.$handleEvent(t),e.chooseImage(t)}}},[n("mIcon",{staticClass:"addIcon",attrs:{type:"plusempty",size:"46",color:"#eee"}})],1)],1),n("v-uni-view",{staticClass:"uni-btn-post"},[n("v-uni-button",{attrs:{type:"primary",plain:"true",formType:"submit"}},[e._v("发表")])],1)],1)],1)],1)},c=[];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return c})},8499:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"m-icon",class:["m-icon-"+e.type],style:{color:e.color,"font-size":e.fontSize},on:{click:function(t){t=e.$handleEvent(t),e.onClick()}}})},c=[];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return c})},"9e7f":function(e,t,n){"use strict";var o=n("0167"),c=n.n(o);c.a},a6d0:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,'@font-face{font-family:uniicons;font-weight:400;font-style:normal;src:url(https://img-cdn-qiniu.dcloud.net.cn/fonts/uni.ttf?t=1536565627510) format("truetype")}.m-icon[data-v-c39115fe]{font-family:uniicons;font-size:%?48?%;font-weight:400;font-style:normal;line-height:1;display:inline-block;text-decoration:none;-webkit-font-smoothing:antialiased}.m-icon.uni-active[data-v-c39115fe]{color:#007aff}.m-icon-user[data-v-c39115fe]:before{content:"\\E100"}.m-icon-person[data-v-c39115fe]:before{content:"\\E101"}.m-icon-personadd[data-v-c39115fe]:before{content:"\\E102"}.m-icon-user-filled[data-v-c39115fe]:before{content:"\\E130"}.m-icon-person-filled[data-v-c39115fe]:before{content:"\\E131"}.m-icon-personadd-filled[data-v-c39115fe]:before{content:"\\E132"}.m-icon-phone[data-v-c39115fe]:before{content:"\\E200"}.m-icon-email[data-v-c39115fe]:before{content:"\\E201"}.m-icon-chatbubble[data-v-c39115fe]:before{content:"\\E202"}.m-icon-chatboxes[data-v-c39115fe]:before{content:"\\E203"}.m-icon-phone-filled[data-v-c39115fe]:before{content:"\\E230"}.m-icon-email-filled[data-v-c39115fe]:before{content:"\\E231"}.m-icon-chatbubble-filled[data-v-c39115fe]:before{content:"\\E232"}.m-icon-chatboxes-filled[data-v-c39115fe]:before{content:"\\E233"}.m-icon-weibo[data-v-c39115fe]:before{content:"\\E260"}.m-icon-weixin[data-v-c39115fe]:before{content:"\\E261"}.m-icon-pengyouquan[data-v-c39115fe]:before{content:"\\E262"}.m-icon-chat[data-v-c39115fe]:before{content:"\\E263"}.m-icon-qq[data-v-c39115fe]:before{content:"\\E264"}.m-icon-videocam[data-v-c39115fe]:before{content:"\\E300"}.m-icon-camera[data-v-c39115fe]:before{content:"\\E301"}.m-icon-mic[data-v-c39115fe]:before{content:"\\E302"}.m-icon-location[data-v-c39115fe]:before{content:"\\E303"}.m-icon-mic-filled[data-v-c39115fe]:before,.m-icon-speech[data-v-c39115fe]:before{content:"\\E332"}.m-icon-location-filled[data-v-c39115fe]:before{content:"\\E333"}.m-icon-micoff[data-v-c39115fe]:before{content:"\\E360"}.m-icon-image[data-v-c39115fe]:before{content:"\\E363"}.m-icon-map[data-v-c39115fe]:before{content:"\\E364"}.m-icon-compose[data-v-c39115fe]:before{content:"\\E400"}.m-icon-trash[data-v-c39115fe]:before{content:"\\E401"}.m-icon-upload[data-v-c39115fe]:before{content:"\\E402"}.m-icon-download[data-v-c39115fe]:before{content:"\\E403"}.m-icon-close[data-v-c39115fe]:before{content:"\\E404"}.m-icon-redo[data-v-c39115fe]:before{content:"\\E405"}.m-icon-undo[data-v-c39115fe]:before{content:"\\E406"}.m-icon-refresh[data-v-c39115fe]:before{content:"\\E407"}.m-icon-star[data-v-c39115fe]:before{content:"\\E408"}.m-icon-plus[data-v-c39115fe]:before{content:"\\E409"}.m-icon-minus[data-v-c39115fe]:before{content:"\\E410"}.m-icon-checkbox[data-v-c39115fe]:before,.m-icon-circle[data-v-c39115fe]:before{content:"\\E411"}.m-icon-clear[data-v-c39115fe]:before,.m-icon-close-filled[data-v-c39115fe]:before{content:"\\E434"}.m-icon-refresh-filled[data-v-c39115fe]:before{content:"\\E437"}.m-icon-star-filled[data-v-c39115fe]:before{content:"\\E438"}.m-icon-plus-filled[data-v-c39115fe]:before{content:"\\E439"}.m-icon-minus-filled[data-v-c39115fe]:before{content:"\\E440"}.m-icon-circle-filled[data-v-c39115fe]:before{content:"\\E441"}.m-icon-checkbox-filled[data-v-c39115fe]:before{content:"\\E442"}.m-icon-closeempty[data-v-c39115fe]:before{content:"\\E460"}.m-icon-refreshempty[data-v-c39115fe]:before{content:"\\E461"}.m-icon-reload[data-v-c39115fe]:before{content:"\\E462"}.m-icon-starhalf[data-v-c39115fe]:before{content:"\\E463"}.m-icon-spinner[data-v-c39115fe]:before{content:"\\E464"}.m-icon-spinner-cycle[data-v-c39115fe]:before{content:"\\E465"}.m-icon-search[data-v-c39115fe]:before{content:"\\E466"}.m-icon-plusempty[data-v-c39115fe]:before{content:"\\E468"}.m-icon-forward[data-v-c39115fe]:before{content:"\\E470"}.m-icon-back[data-v-c39115fe]:before,.m-icon-left-nav[data-v-c39115fe]:before{content:"\\E471"}.m-icon-checkmarkempty[data-v-c39115fe]:before{content:"\\E472"}.m-icon-home[data-v-c39115fe]:before{content:"\\E500"}.m-icon-navigate[data-v-c39115fe]:before{content:"\\E501"}.m-icon-gear[data-v-c39115fe]:before{content:"\\E502"}.m-icon-paperplane[data-v-c39115fe]:before{content:"\\E503"}.m-icon-info[data-v-c39115fe]:before{content:"\\E504"}.m-icon-help[data-v-c39115fe]:before{content:"\\E505"}.m-icon-locked[data-v-c39115fe]:before{content:"\\E506"}.m-icon-more[data-v-c39115fe]:before{content:"\\E507"}.m-icon-flag[data-v-c39115fe]:before{content:"\\E508"}.m-icon-home-filled[data-v-c39115fe]:before{content:"\\E530"}.m-icon-gear-filled[data-v-c39115fe]:before{content:"\\E532"}.m-icon-info-filled[data-v-c39115fe]:before{content:"\\E534"}.m-icon-help-filled[data-v-c39115fe]:before{content:"\\E535"}.m-icon-more-filled[data-v-c39115fe]:before{content:"\\E537"}.m-icon-settings[data-v-c39115fe]:before{content:"\\E560"}.m-icon-list[data-v-c39115fe]:before{content:"\\E562"}.m-icon-bars[data-v-c39115fe]:before{content:"\\E563"}.m-icon-loop[data-v-c39115fe]:before{content:"\\E565"}.m-icon-paperclip[data-v-c39115fe]:before{content:"\\E567"}.m-icon-eye[data-v-c39115fe]:before{content:"\\E568"}.m-icon-arrowup[data-v-c39115fe]:before{content:"\\E580"}.m-icon-arrowdown[data-v-c39115fe]:before{content:"\\E581"}.m-icon-arrowleft[data-v-c39115fe]:before{content:"\\E582"}.m-icon-arrowright[data-v-c39115fe]:before{content:"\\E583"}.m-icon-arrowthinup[data-v-c39115fe]:before{content:"\\E584"}.m-icon-arrowthindown[data-v-c39115fe]:before{content:"\\E585"}.m-icon-arrowthinleft[data-v-c39115fe]:before{content:"\\E586"}.m-icon-arrowthinright[data-v-c39115fe]:before{content:"\\E587"}.m-icon-pulldown[data-v-c39115fe]:before{content:"\\E588"}.m-icon-scan[data-v-c39115fe]:before{content:"\\E612"}',""])},ccf8:function(e,t,n){"use strict";n.r(t);var o=n("deab"),c=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);t["default"]=c.a},deab:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={props:{type:String,color:String,size:{type:[Number,String],default:24}},computed:{fontSize:function(){var e=Number(this.size);return e=isNaN(e)?24:e,"".concat(e,"px")}},methods:{onClick:function(){this.$emit("click")}}};t.default=o},fc1e:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".uni-btn-post[data-v-1b69aa6e]{margin-top:20px}.image[data-v-1b69aa6e]{width:100px;height:105px}.demo[data-v-1b69aa6e]{background:#fff;padding:%?50?%}.addfile[data-v-1b69aa6e]{cursor:pointer;background-color:#fff;border:2px dashed #ddd;line-height:113px;text-align:center;display:inline-block;width:100px;height:100px;margin:0 0 0 8px;background-size:32px 32px;background-position:50%;background-repeat:no-repeat;overflow:hidden;position:relative}.addIcon[data-v-1b69aa6e]{padding:27px}",""])}}]);